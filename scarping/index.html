<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Basic Web Scrapper</title>
    <link rel="stylesheet" href="style.css">
    <!-- Font Awesome CDN link added below -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Google Fonts: Poppins -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Navigation bar in heading -->
    <nav>
        <img class="logo" src="assest/img/resized_image_100x100.jpg" alt="img">
      
        <ul style="list-style:none; display:flex; gap:28px; margin:0 32px; align-items:center;">
            <li><a href="#" style="text-decoration:none; color:#ff6600; font-weight:500;">Home</a></li>
            <li><a href="#" style="text-decoration:none; color:#ff6600; font-weight:500;">Scrape</a></li>
            <li><a href="#" style="text-decoration:none; color:#ff6600; font-weight:500;">Reports</a></li>
            <li><a href="#" style="text-decoration:none; color:#ff6600; font-weight:500;">Settings</a></li>
        </ul>
        <button class="toggle-btn" id="toggleMode" title="Toggle Dark/Light">
            <i id="modeIcon" class="fa-solid fa-sun"></i>
        </button>
    </nav>
    <main class="intro-img-bg">
        <div class="intro-section">
            <div class="intro-text">
                <h1><span class="h1-brand">DataDigger</span> – <span class="h1-accent">Extract the Web</span>,<br><span class="h1-highlight">Empower Your Insight</span></h1>
                <h2>What is a Web Scrapper?</h2>
                <p>
                    A web scrapper is a tool that automatically extracts data from websites. It helps you collect information such as text, images, or links for analysis, reporting, or automation.<br><br>
                    <span style="color:#ff6600; font-weight:500;">Get started by using the navigation above to explore features!</span>
                </p>
            </div>
            <div class="intro-img-bg">
                <img src="assest/img/OIP__3_-removebg-preview.png" alt="Scrapper Illustration">
                 <span class="online-dot" title="Online"></span>
             </div>
        </div>
        <section class="scrape-card">
            <h2>Try the Web Scraper</h2>
            <form id="scrapeForm" class="scrape-form" autocomplete="off">
                <label for="scrapeUrl">Enter a page URL</label>
                <div class="scrape-input-row">
                    <div class="input-wrapper">
                        <span class="input-icon"><i class="fa-solid fa-link"></i></span>
                        <input type="url" id="scrapeUrl" name="url" placeholder="https://example.com" required>
                    </div>
                    <button type="submit" class="btn scrape-btn btn-gradient" id="scrapeBtn">Scrape</button>
                </div>
                <small class="help-text">Example: https://en.wikipedia.org/wiki/Web_scraping</small>
            </form>
            <div id="scrapeStatus" class="scrape-status" aria-live="polite"></div>
            <div id="scrapeResults" class="scrape-results" hidden>
                <div class="results-header">
                    <span id="resultCounts" class="result-counts"></span>
                </div>
                <div class="results-grid">
                    <div class="results-col">
                        <h3>Sample Paragraphs</h3>
                        <ul id="paraList" class="list"></ul>
                    </div>
                    <div class="results-col">
                        <h3>Sample Links</h3>
                        <ul id="linkList" class="list"></ul>
                    </div>
                </div>
            </div>
        </section>
        
        <section>
            <h2>How to Use</h2>
            <ol>
                <li>Go to <b>Scrape</b> to start a new web scraping task.</li>
                <li>Check <b>Reports</b> for your results.</li>
                <li>Adjust preferences in <b>Settings</b>.</li>
            </ol>
        </section>

        <section class="guides">
            <h2>Use Data Responsibly (According to Each Site)</h2>
            <div class="notice">
                Always check a website’s terms and <code>/robots.txt</code> before scraping. When in doubt, seek permission.
            </div>
            <div class="guides-grid">
                <div class="guide">
                    <h3>If the site provides an API</h3>
                    <ul>
                        <li>Prefer the official API over scraping.</li>
                        <li>Follow auth, quotas, and attribution rules.</li>
                        <li>Cache responses to reduce load.</li>
                    </ul>
                </div>
                <div class="guide">
                    <h3>Public pages without login</h3>
                    <ul>
                        <li>Respect <code>robots.txt</code> and rate-limit (e.g., 1–2 req/sec).</li>
                        <li>Collect only what’s necessary; avoid PII.</li>
                        <li>Credit the source if you republish summaries.</li>
                    </ul>
                </div>
                <div class="guide">
                    <h3>Behind login or user content</h3>
                    <ul>
                        <li>Get explicit permission; comply with ToS.</li>
                        <li>Never scrape private data or paywalled content without rights.</li>
                        <li>Encrypt stored data and expire it promptly.</li>
                    </ul>
                </div>
                <div class="guide">
                    <h3>Commercial use</h3>
                    <ul>
                        <li>Verify license for reuse; obtain agreements if needed.</li>
                        <li>Provide opt-out and remove-on-request workflow.</li>
                        <li>Log provenance (URL, time, terms version).</li>
                    </ul>
                </div>
            </div>
        </section>
    </main>
    <footer class="site-footer">
        <div class="footer-inner">
            <div class="footer-brand">
                <img class="logo" src="assest/img/resized_image_100x100.jpg" alt="logo">
                <span>Susant Gautam</span>
            </div>
            <div class="footer-links">
                <a href="#">About</a>
                <a href="#">Docs</a>
                <a href="#">Privacy</a>
                <a href="#">Contact</a>
            </div>
            <div class="footer-copy">© <span id="year"></span> Nexolinxs. All rights reserved.</div>
        </div>
    </footer>
    <script>
        // Dark/Light mode toggle
        const btn = document.getElementById('toggleMode');
        const icon = document.getElementById('modeIcon');
        btn.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            if (document.body.classList.contains('dark-mode')) {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
            } else {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
            }
        });

        // Basic scraper form handler
        const scrapeForm = document.getElementById('scrapeForm');
        const scrapeStatus = document.getElementById('scrapeStatus');
        const scrapeBtn = document.getElementById('scrapeBtn');
        const resultsBox = document.getElementById('scrapeResults');
        const paraList = document.getElementById('paraList');
        const linkList = document.getElementById('linkList');
        const resultCounts = document.getElementById('resultCounts');
        if (scrapeForm) {
            scrapeForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const urlInput = document.getElementById('scrapeUrl');
                const target = urlInput.value.trim();
                if (!target) return;
                scrapeStatus.textContent = 'Submitting URL for scraping…';
                scrapeStatus.className = 'scrape-status info';
                if (scrapeBtn) { scrapeBtn.disabled = true; scrapeBtn.dataset.originalText = scrapeBtn.textContent; scrapeBtn.textContent = 'Scraping…'; }
                try {
                    const res = await fetch('/scrape', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ url: target })
                    });
                    if (!res.ok) throw new Error('Request failed');
                    const data = await res.json();
                    scrapeStatus.textContent = data.message || 'Scrape request submitted successfully.';
                    scrapeStatus.className = 'scrape-status success';

                    // Populate results box
                    if (resultsBox && paraList && linkList && resultCounts) {
                        paraList.innerHTML = '';
                        for (const p of (data.sampleParagraphs || [])) {
                            const li = document.createElement('li');
                            li.textContent = p || '(empty paragraph)';
                            paraList.appendChild(li);
                        }

                        linkList.innerHTML = '';
                        for (const item of (data.sampleLinks || [])) {
                            const li = document.createElement('li');
                            const a = document.createElement('a');
                            a.href = item.url;
                            a.target = '_blank';
                            a.rel = 'noopener noreferrer';
                            a.textContent = item.text || item.url;
                            li.appendChild(a);
                            linkList.appendChild(li);
                        }

                        resultCounts.textContent = `${data.paragraphCount || 0} paragraphs • ${data.linkCount || 0} links`;
                        resultsBox.hidden = false;
                        resultsBox.scrollIntoView({ behavior: 'smooth', block: 'start' });
                    }
                } catch (err) {
                    scrapeStatus.textContent = 'Could not reach the scraper backend. Please run the server and try again.';
                    scrapeStatus.className = 'scrape-status error';
                }
                if (scrapeBtn) { scrapeBtn.disabled = false; scrapeBtn.textContent = scrapeBtn.dataset.originalText || 'Scrape'; }
            });
        }
        // Footer year
        const y = document.getElementById('year');
        if (y) y.textContent = new Date().getFullYear();
    </script>
</body>
</html>